---
title: valine è¯„è®ºç³»ç»Ÿä½¿ç”¨æ•™ç¨‹
date: 2020-03-30 20:32
updated: 2020-03-30 20:32
cover: //cdn.wallleap.cn/img/pic/cover/2023029eAQof.jpg
category: æŠ€æœ¯æ‚è°ˆ
tags:
  - åšå®¢
  - valine
description: valine è¯„è®ºç³»ç»Ÿä½¿ç”¨æ•™ç¨‹
---

è¯„è®ºç³»ç»Ÿåƒåƒä¸‡ï¼Œå¥½çœ‹å…¼å¥½ç”¨çš„ Valine è¿˜æ˜¯ OK çš„

æœ€å¼€å§‹ç”¨è¿™ä¸ªè¯„è®ºæ˜¯åœ¨ä½¿ç”¨ Sakura ä¸»é¢˜çš„æ—¶å€™ï¼Œä½†æ˜¯é‚£ä¸ªæ—¶å€™æ²¡è®¤çœŸçœ‹æ•™ç¨‹

è§‰å¾—å®ƒæ²¡æœ‰é‚®ä»¶æé†’åŠŸèƒ½ã€è€Œä¸”æœ‰çš„æ—¶å€™è¿˜ä¼šæŠ¥é”™ï¼Œå°±æ²¡ä½¿ç”¨äº†

æ”¹ç”¨çš„æ¥å¿…åŠ›å’Œ Gitmentï¼ŒGitment ä½¿ç”¨èµ·æ¥æŒºæ–¹ä¾¿çš„ï¼Œèƒ½å¤Ÿé‚®ä»¶æé†’ï¼Œè€Œä¸”æŠ¥çš„é”™è¯¯ä¹Ÿèƒ½è§£å†³

emmmmâ€¦â€¦ä¸€ç›´åˆ°ç°åœ¨ï¼Œæƒ³æ¥ç€ç”¨ valineï¼Œç„¶åæœäº†å¾ˆå¤šç¯‡æ•™ç¨‹ï¼Œå‘ç° valine è¿˜æ˜¯éå¸¸å¥½ç”¨çš„

æ‰‹åŠ¨é…å›¾ï¼šçœŸé¦™.gif

ç„¶åæ¥ä¸‹æ¥å°±è®²ä¸‹æ€æ ·**æ·»åŠ  valine**ï¼Œå¯¹å…¶è¿›è¡Œ**ç¾åŒ–**å’Œæ·»åŠ è¯„è®ºåŠŸèƒ½å§

emmmmï¼Œç‰ˆæœ¬ ` v1.4.0` ä¹‹åæ›´æ–°äº†å¾ˆå¤šå†…å®¹ï¼Œä¸å¾—ä¸è¯´ï¼Œè¿™æ®µæ—¶é—´ä½œè€…çœŸçš„æ˜¯é«˜äº§å•Š

![](https://cdn.wallleap.cn/img/pic/illustration/valine.png)

ä½†æ˜¯ä¸æƒ³æ¨ç¿»é‡å†™ï¼Œå› æ­¤ç›´æ¥åœ¨è¿™ç¯‡åšæ–‡ä¸Šä¿®æ”¹

<font color="#bac">æ›´æ–°å†…å®¹</font>

- [x] å»é™¤QQå¤´åƒé…ç½®çš„å†…å®¹ï¼Œæ›´æ–°ä¸ºæ–°çš„æ–¹æ³•
- [x] æŒ‰ç…§å®˜ç½‘æ›´æ–°é…ç½®é¡¹è§£é‡Š
- [x] æ·»åŠ è‡ªå®šä¹‰è¡¨æƒ…ç”¨æ³•
- [x] å»é™¤è¯„è®ºæ¡†è·Ÿéšï¼Œå®˜æ–¹å·²æ”¯æŒ
- [ ] ç¾åŒ–çš„å¥½å¤šä¸èƒ½ç”¨äº†

## æ³¨å†Œç™»å½•

å‰å¾€ [LeanCloud æ³¨å†Œ](https://leancloud.cn/dashboard/login.html#/signup)è´¦å·ï¼Œå¦‚æœå·²ç»æœ‰äº†è´¦å·ï¼Œå¯ä»¥ç›´æ¥[ç™»å½•](https://leancloud.cn/dashboard/login.html#/signin)

æ¥ç€è¿›å…¥[æ§åˆ¶å°](https://leancloud.cn/dashboard/applist.html#/apps),å·¦ä¸‹è§’æœ‰ä¸¤ä¸ªæŒ‰é’®`å¿«é€Ÿå…¥é—¨`å’Œ`åˆ›å»ºåº”ç”¨`ï¼Œæˆ‘ä»¬ç‚¹å‡»`åˆ›å»ºåº”ç”¨`ï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªåå­—ï¼Œä¾‹å¦‚ `valine`ï¼Œå…¶ä»–é»˜è®¤ï¼Œç‚¹å‡»`åˆ›å»º`

ç°åœ¨åœ¨æ§åˆ¶å°å‡ºç°äº†ä½ åˆšåˆšåˆ›å»ºçš„åº”ç”¨ï¼Œç‚¹å‡»è¿™ä¸ªåº”ç”¨çš„å³ä¸Šè§’è®¾ç½®å›¾æ ‡

è¿›å…¥äº†è®¾ç½®ç•Œé¢ï¼Œç‚¹å‡» `valine å¼€å‘ç‰ˆ`ä¸‹é¢é‚£æ é‡Œçš„`åº”ç”¨ Keys`

æˆ‘ä»¬åªéœ€è¦é‡Œé¢çš„ `AppID` å’Œ `AppKey`ï¼Œç°åœ¨å…ˆå¼€å§‹ä¸‹é¢æ“ä½œï¼Œè¿™ä¸¤ä¸ªç­‰ä¸‹ä¼šç”¨åˆ°

![valine åº”ç”¨ keys](https://cdn.wallleap.cn/img/pic/illustration/valine1.png)

å½“ç„¶å•¦ï¼Œå¦‚æœä½ çš„åšå®¢ä¸»é¢˜å·²ç»**é›†æˆ**äº† valineï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªå€¼å¡«åˆ° `_config.yml` çš„ç›¸åº”ä½ç½®å°±å¯ä»¥äº†ï¼Œä¸‹é¢çš„æ•™ç¨‹å°±å¯ä»¥é€‰æ‹©æ€§æŸ¥çœ‹äº†

## ä¿®æ”¹åšå®¢æ¸²æŸ“æ–‡ä»¶

### æ·»åŠ ä»£ç 

ç°åœ¨åˆ°åšå®¢ä¸»é¢˜ç›®å½•ä¸‹æ‰“å¼€ `layout` ç›®å½•ï¼Œå†è¿›å…¥ `_partial` ç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•å³ `MyBlog/themes/ä¸»é¢˜å/layout/_partial` ä¸‹æ–°å»º `comment.ejs` æ–‡ä»¶ï¼Œå¡«å…¥ä»£ç ï¼š

```ejs
<% if (theme.valine && post.comments) { %>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <!-- å½“ç„¶å•¦ï¼Œè¿™ä¸ªå¯ä»¥åœ¨<head></head>ä¸­å¼•å…¥ -->
    <div id="vcomments"></div>
    <script>
    new Valine({
        el: '#vcomments' ,
        appId: '<%= theme.v_appId %>',
        appKey: '<%= theme.v_appKey %>',
        avatar:'mp', 
        placeholder: 'just go go' ï¼Œ
      	enableQQ: true,
      	// è®¾ç½®Bilibiliè¡¨æƒ…åŒ…åœ°å€
        emojiCDN: '//i0.hdslb.com/bfs/emote/', 
        // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
        emojiMaps: {
            "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
            "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
            "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
            "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
            "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
            "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
            "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
            "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
            "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
            "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
            "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
            "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
            "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
            "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
            "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
            "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
            "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
            "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
            "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
            "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
            "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
            // ... æ›´å¤šè¡¨æƒ…
        } 
    });
    </script>
<% } %>
```

å†å°†å¦‚ä¸‹ä»£ç æ”¾åˆ°éœ€è¦çš„ä½ç½®ï¼Œä¸€èˆ¬æ˜¯åœ¨æ–‡ç« åº•éƒ¨

```ejs
<%- partial('_partial/comment') %>
```

### åˆ¤æ–­è®²è§£

åŠ å…¥åˆ¤æ–­æ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å¯å’Œå…³é—­è¯„è®ºï¼Œé¦–å…ˆæ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶ `_config.yml` ä¸­,åŠ å…¥

```yml
valine: true   # ä¿®æ”¹ä¸ºfalseå…³é—­valineè¯„è®º
v_appId: åˆšåˆšè·å–çš„appid
v_appKey: åˆšåˆšè·å–çš„appkey
```

æ¥ç€æ˜¯å†™çš„æ–‡ç« ä¸­ `æ–‡ç« å.md`

```markdown
---
title: æ–‡ç« å
categories: åšå®¢
date: 2020-03-30 12:16:01
comments: true    æ·»åŠ ä¸Šè¿™ä¸ªï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« ä¸éœ€è¦è¯„è®ºæ”¹ä¸ºfalseï¼Œé»˜è®¤å¼€å¯
tags: hexo
---

æ­£æ–‡
```

è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼šä»¥å‰æˆ‘ä½¿ç”¨ `post.comments` æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨å¥½åƒä¸è¡Œäº†ï¼Œå¦‚æœæŠ¥çš„æ˜¯æœ‰å…³ `post` çš„é”™è¯¯ï¼Œå¯ä»¥æ”¹ä¸º `page.comments`ï¼Œæˆ–è€…ç›´æ¥å»æ‰

### é…ç½®é¡¹è®²è§£

å¯ä»¥å‰å¾€ [valine å®˜ç½‘](https://valine.js.org/)æŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨

~~è¿™é‡ŒæŒ‘ä¸€äº›æˆ‘ä»¬ä¼šç”¨åˆ°çš„è¯´ä¸‹~~

<font color="red" size=5>æ›´æ–°</font> ä¸å†™å‡ºå·²ç»ä¸¢å¼ƒçš„é…ç½®é¡¹

é™¤äº†æœ€åä¸€ä¸ªé…ç½®é¡¹ï¼Œå…¶ä»–éƒ½è¦åœ¨æœ«å°¾åŠ ä¸Šè‹±æ–‡çš„ `,`

```js
el: '#vcomments'
```

è¿™ä¸ªå­—æ®µåªè¦ä½ ä¸æ”¹ `div` çš„ä»£ç å°±ä¸éœ€è¦ä¿®æ”¹,å¦‚æœä½  `div` ä¸æƒ³ç”¨ `id`ï¼Œè€Œæ˜¯æ”¹ä¸ºäº† `class="valine"`ï¼Œé‚£ä½ å°±éœ€è¦æŠŠè¿™é‡Œæ”¹ä¸º `.valine`

```js
appId: 'ä»LeanCloudçš„åº”ç”¨ä¸­å¾—åˆ°çš„appId.'
appKey: 'ä»LeanCloudçš„åº”ç”¨ä¸­å¾—åˆ°çš„APP Key.'
```

ä¸Šé¢çš„æ˜¯åŸºæœ¬é…ç½®

```yml
placeholder: `å¿«æ¥è¯„è®ºå•Š`
```

è¯„è®ºæ¡†å ä½æç¤ºç¬¦ï¼Œå†™äº†ä¹‹åä¼šåœ¨è¯„è®ºæ¡†å†…å‡ºç°æ–‡å­—

```yml
path: 'window.location.pathname'
```

å½“å‰`æ–‡ç« é¡µ`è·¯å¾„ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„`æ–‡ç« é¡µ`ï¼Œç”¨è¿™ä¸ªé»˜è®¤å€¼å°±è¡Œ

> I. è¯·ä¿è¯æ¯ä¸ª`æ–‡ç« é¡µ`è·¯å¾„çš„å”¯ä¸€æ€§ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°ä¸åŒ`æ–‡ç« é¡µ`ä¸‹åŠ è½½ç›¸åŒè¯„è®ºåˆ—è¡¨çš„æƒ…å†µã€‚
> 
> II. å¦‚æœå€¼ä¸º`window.location.href`ï¼Œå¯èƒ½ä¼šå‡ºç°éšä¾¿åŠ `ä¸åŒå‚æ•°`è¿›å…¥è¯¥é¡µé¢ï¼Œè€Œè¢«åˆ¤æ–­æˆæ–°é¡µé¢çš„æƒ…å†µã€‚

```yml
avatar: 'mp'
```

çœ‹å®˜ç½‘çš„ä»‹ç»ï¼Œå¯ä»¥é…ç½®ä¸º QQ å¤´åƒ

```yml
meta: ['nick','mail','link']
```

è¯„è®ºè€…ç›¸å…³å±æ€§ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªï¼šæ˜µç§°ã€é‚®ç®±ã€ç½‘é¡µé“¾æ¥

```yml
requiredFields: ['nick','mail']
```

è®¾ç½®`å¿…å¡«é¡¹`ï¼Œé»˜è®¤ä¸º `[]`ï¼ŒåŒ¿åæ˜¾ç¤º

```yml
pageSize: '5'
```

è¯„è®ºåˆ—è¡¨åˆ†é¡µï¼Œæ¯é¡µæ¡æ•°,é»˜è®¤ä¸º10

```ynl
lang: 'en'
```

è¯­è¨€ï¼Œé»˜è®¤ä¸ºä¸­æ–‡ï¼šzh-CN

```yml
visitor: true
```

æ–‡ç« è®¿é—®é‡ç»Ÿè®¡,è¿™ä¸ªè¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼Œç­‰ä¸‹è¯´

```yml
highlight: false
```

ä»£ç é«˜äº®ï¼Œé»˜è®¤å¼€å¯ï¼Œè¿™ä¸ªä¸æ¨èå…³é—­ï¼Œå»æ‰è¿™ä¸ªå­—æ®µå°±è¡Œ

```yml
avatarForce: false
```

æ¯æ¬¡è®¿é—®å¼ºåˆ¶æ‹‰å–æœ€æ–°çš„è¯„è®ºåˆ—è¡¨å¤´åƒ,ä¸æ¨èè®¾ç½®ä¸º trueï¼Œç›®å‰çš„è¯„è®ºåˆ—è¡¨å¤´åƒä¼šè‡ªåŠ¨å¸¦ä¸Š Valine çš„ç‰ˆæœ¬å·

```yml
recordIP: true
```

è®¾ç½®ä¸º true ä¹‹åä¼šè®°å½•è¯„è®ºè€… IPï¼Œé»˜è®¤ä¸º false

```js
// è¿™é‡Œè®¾ç½®CDN, é»˜è®¤å¾®åšè¡¨æƒ…CDN
emojiCDN: 'https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/', 
// è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
emojiMaps: {
"smile":"e3/2018new_weixioa02_org.png",
"lovely":"09/2018new_keai_org.png",
// ... æ›´å¤šè¡¨æƒ…
} 
```

è¡¨æƒ…è®¾ç½®

```js
enableQQ: true
```

å¯ç”¨`æ˜µç§°æ¡†`è‡ªåŠ¨è·å–`QQæ˜µç§°`å’Œ`QQå¤´åƒ`, é»˜è®¤å…³é—­

## æ–‡ç« é˜…è¯»é‡

å¯ä»¥ä½¿ç”¨ä¸è’œå­ï¼Œä½†æ˜¯å¶å°”ä¼šé“¾æ¥ä¸åˆ°

æŒ‰ç…§ valine çš„è¯´æ³•ï¼š

> å¦‚æœå¼€å¯äº†é˜…è¯»é‡ç»Ÿè®¡ï¼ŒValine ä¼šè‡ªåŠ¨æ£€æµ‹ LeanCloud åº”ç”¨ä¸­æ˜¯å¦å­˜åœ¨ Counter ç±»ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»º~

ä¹Ÿå°±æ˜¯å¦‚æœæ²¡ä½¿ç”¨ valine çš„è¯è¿˜éœ€è¦è‡ªå·±æ·»åŠ ä¸€ä¸ª `Counter ç±»`ï¼Œè¿™ä¸ªæ˜¯åœ¨`LeanCloud` çš„`å­˜å‚¨`ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨é…ç½®äº† valine äº†å°±å¯ä»¥çœäº‹äº†

> Valine ä¼šè‡ªåŠ¨æŸ¥æ‰¾é¡µé¢ä¸­ class å€¼ä¸º leancloud_visitors çš„å…ƒç´ ï¼Œè·å–å…¶ id ä¸ºæŸ¥è¯¢æ¡ä»¶ã€‚å¹¶å°†å¾—åˆ°çš„å€¼å¡«å……åˆ°å…¶ class çš„å€¼ä¸º leancloud-visitors-count çš„å­å…ƒç´ é‡Œï¼š

soï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ `comment.ejs` çš„æœ€åé¢åŠ ä¸Šè¿™äº›å³å¯

```ejs
<span id="/<%= page.path %>" class="leancloud_visitors" data-flag-title="Your Article Title">
    <em class="post-meta-item-text">é˜…è¯»é‡ </em>
    <i class="leancloud-visitors-count">1000000</i>
</span>
```

å¦‚æœè¿™ä¸ª `id` ä¸è¡Œçš„è¯ï¼Œå¯ä»¥æ”¹ä¸º `page.permalink` å®Œæ•´çš„ç½‘å€è¯•ä¸‹

## ~~å¤´åƒé…ç½®~~

> Valine ç›®å‰ä½¿ç”¨çš„æ˜¯ [Gravatar](http://cn.gravatar.com/) ä½œä¸ºè¯„è®ºåˆ—è¡¨å¤´åƒã€‚
> è¯·è‡ªè¡Œç™»å½•æˆ–æ³¨å†Œ Gravatarï¼Œç„¶åä¿®æ”¹è‡ªå·±çš„å¤´åƒã€‚
> è¯„è®ºçš„æ—¶å€™ï¼Œç•™ä¸‹åœ¨ Gravatar æ³¨å†Œæ—¶æ‰€ä½¿ç”¨çš„é‚®ç®±å³å¯ã€‚

~~valine æ–‡æ¡£ä¸­è¯´`æ„Ÿè°¢gravatar.cat.netæä¾›çš„é•œåƒæœåŠ¡`ï¼Œé‚£ç”¨ QQ çš„å¯ä¸å¯ä»¥å‘¢~~

~~ç„¶åæ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼š~~

[Valine-å®ç°QQé‚®ç®±è¯†åˆ«ç”Ÿæˆå¤´åƒåœ°å€ï¼ˆå®Œç¾è§£å†³å¤´åƒé—®é¢˜ï¼‰](https://blog.csdn.net/cungudafa/article/details/104638730/)

~~é¦–å…ˆä¸‹è½½[valine.min.js](https://unpkg.com/valine@latest/dist/Valine.min.js) ï¼Œç°åœ¨æ˜¯1.3.10ç‰ˆæœ¬~~

~~æ”¾åˆ°ä¸»é¢˜çš„sourceç›®å½•çš„jsç›®å½•ä¸‹~~

~~å†æŠŠåˆšåˆšä¸Šé¢å¼•å…¥çš„jsæ”¹ä¸º~~

```ejs
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
æ”¹ä¸º
<script src='/js/Valine1.3.10.min.js'></script>
```

~~æ‰“å¼€jsæ–‡ä»¶ï¼Œæœç´¢~~

```ejs
(m.cdn+a(e.get("mail"))+m.params)+'">',
```

~~ä»è¿™é‡Œå¾€å‰ç›´åˆ° `var C=function(e,n,r)`ï¼Œéƒ½æ›¿æ¢ä¸º~~

```ejs
 var C=function(e,n,r){
	var qq_img=m.cdn+a(e.get("mail"))+m.params;//é»˜è®¤gravatorå¤´åƒæ¥å£
	 if(e.get("mail").indexOf("@qq.com") >= 0){
		var prefix = e.get("mail").replace(/@.*/, "");//å‰ç¼€
		var pattern=/^\d+$/g;  //æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ•°å­—
		var result= prefix.match(pattern);//match æ˜¯åŒ¹é…çš„æ„æ€
		if(result!==null){
			qq_img = "//q1.qlogo.cn/g?b=qq&nk="+ prefix +"&s=100";
		}
	}
	var i=u.create("div",{class:"vcard",id:e.id}),o=m.hide?"":'<img class="vimg" src="'+ (qq_img)+'">',
```

~~ç„¶åå¡«çš„æ˜¯QQé‚®ç®±çš„è¯å°±ä¼šæ˜¾ç¤ºQQå¤´åƒè¾£~~

~~å½“ç„¶å¦‚æœä½ å®åœ¨å¾ˆæ‡’ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå·²ç»ä¿®æ”¹å¥½äº†çš„~~

```javascript
<script src='https://cdn.wallleap.cn/js/Valine1.3.10.min.js'></script>
```

<font color="red" size=5>æ³¨</font> ç”±äºæ–°ç‰ˆçš„ valine å·²ç»åŠ å…¥äº† QQ å¤´åƒçš„å†…å®¹ï¼Œå› æ­¤æ•™ç¨‹ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š

ä»ç„¶åªéœ€è¦å¼•å…¥å®˜æ–¹åŸç‰ˆçš„ js æ–‡ä»¶ï¼Œä¸éœ€è¦åœ¨æºä»£ç ä¸­ä¿®æ”¹äº†

```javascript
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
```

å¼€å¯é…ç½®é¡¹ä¸­çš„æ˜µç§°æ¡†è‡ªåŠ¨è·å–`QQ æ˜µç§°`å’Œ`QQ å¤´åƒ`åŠŸèƒ½

```js
enableQQ: true;
```

## è‡ªå®šä¹‰è¡¨æƒ…

å¾ˆæ—©å°±æƒ³æŠŠ valine é‡Œçš„è¡¨æƒ…ä¿®æ”¹ä¸º B ç«™è¡¨æƒ…äº†ï¼Œå¯æƒœæ²¡æ‰¾åˆ°å¥½ç”¨çš„æ•™ç¨‹ï¼Œæ²¡æƒ³åˆ°ä½œè€…å±…ç„¶åŠ å…¥äº†è¿™ä¸ªåŠŸèƒ½

ä½¿ç”¨æ–¹æ³•ï¼š

```ejs
new Valine({
    el:'#vcomment',
    appId:'<Your_APP_ID>',
    appKey:'<Your_APP_KEY>',

    // è®¾ç½®è¡¨æƒ…åŒ…åœ°å€
    emojiCDN: '//i0.hdslb.com/bfs/emote/', 
    // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
    emojiMaps: {
        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
        // ... æ›´å¤šè¡¨æƒ…
    } 
})
```

ç„¶åè¿™é‡Œåˆ†äº«ä¸€ä¸‹å‡ ä¸ªè¡¨æƒ…åŒ…ï¼š

cdn å¯ä»¥å¡«`https://cdn.wallleap.cn/tree/master/emote/xxx`

`xxx`ä»£è¡¨é‡Œé¢çš„å‡ ä¸ªç›®å½•ï¼Œæ¯ä¸ªé‡Œéƒ½æä¾›äº†ä¸€ä¸ªåŒ…å«è¯¥ç›®å½•ä¸‹æ‰€æœ‰å›¾ç‰‡çš„ `list.txt`

```
bili Bç«™è¡¨æƒ…åŒ…ï¼Œé‡Œé¢æœ‰ä¸¤ç§
cool é…·å®‰è¡¨æƒ…åŒ…
qq   QQè¡¨æƒ…åŒ…
tieba ç™¾åº¦è´´å§
weibo å¾®åš
```

æˆ‘å®åœ¨å¿˜äº†è¿™æ˜¯åœ¨å“ªä¸ªåœ°æ–¹æ‰¾æ¥çš„è¡¨æƒ…åŒ…äº†ï¼Œæ‰€ä»¥æš‚æ—¶ä¸å£°æ˜åŸåœ°å€äº†ï¼Œç­‰æ‰¾åˆ°äº†å†åŠ ä¸Š

å•Šï¼Œè¿˜æœ‰ä¸€ä¸ªè€å“¥æä¾›çš„ï¼Œåœ°å€åœ¨ä¸‹é¢

<https://github.com/blogimg/emotion>

## è¯„è®ºæ¡†ç¾åŒ–

é»˜è®¤çš„å…¶å®è¿˜å¯ä»¥ï¼Œå¯ç´ å¯ä»¥æ›´æ¼‚äº®è‚¯å®šå¾—åŠ çš„

æ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹è¿™ç¯‡åšå®¢ [Valine è¯„è®ºæ¡†ç¾åŒ–åŠåŠŸèƒ½ä¼˜åŒ–](https://immmmm.com/valine-diy/)

è¿™é‡Œæˆ‘å°±ç›´æ¥æ¬è¿‡æ¥å•¦

```css
.v .vwrap{padding: 0 0 44px;}.v .veditor{min-height:7rem;resize:none;}.v .vwrap .vedit{padding-top:0}.v .vwrap .vheader{width: 80%;bottom:0;position: absolute;background: #f7f7f7;}.v .vinput{padding:10px 15px;}.v .vwrap .vheader .vinput{border-bottom:0px}.v .vwrap .vedit .vctrl{margin-top:-44px;right:0;position:absolute;margin-right:-3px;}.v .vwrap .vcontrol{    position:absolute;right:0;bottom:0;width:20%;padding-top:0px;}.v .vwrap .vcontrol .col.col-80{width: 100%;}.v .vbtn.vsubmit{border-radius: 0;padding: 0;color: #fff;line-height: 44px;width:100%;border: none;background:#1abc9c;}.v .vwrap .vedit .vctrl span.vpreview-btn,.v .vwrap .vcontrol .col.col-20,.v .vlist .vcard .vhead .vsys{display:none;}
@media screen and (max-width: 520px){
	.v .vwrap .vheader .vinput{width: 33.33%;padding:10px 5px;}
}
```

å¦‚æœä½ éœ€è¦åº•éƒ¨æœ‰ä¸ªå›¾ç‰‡å¯ä»¥åŠ ä¸Š

```css
#veditor {
    background-image: url(èƒŒæ™¯å›¾ç‰‡åœ°å€);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: right;
    background-color: rgba(255,255,255,0);
    resize: vertical;
}
```

`placeholder` å­—æ®µä¹Ÿèƒ½ç”¨ä¸Šï¼Œä½¿ç”¨ä»Šæ—¥è¯—è¯æˆ–è€…ä¸€è¨€

```javascript
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
<script type="text/javascript">
jinrishici.load(function(result) {
	var jrsc_plac =  result.data.content + "\nã€Œ" + result.data.origin.title + "ã€" + result.data.origin.dynasty + " Â· " + result.data.origin.author
	document.getElementById("veditor").setAttribute("placeholder",jrsc_plac);
});
</script>
<style>
textarea[id='veditor']::placeholder{
    color:#b3b3b3;font-size:14px;text-align:center;line-height:6rem;
}
</style>
```

## è¯„è®ºæ¡†çš„åŠŸèƒ½

å¯èƒ½éœ€è¦ jQueryï¼Œå…ˆå¼•å…¥

```html
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
```

### å‰ç«¯éªŒè¯

valine è‡ªå¸¦çš„éªŒè¯ç ä¹Ÿå¯ä»¥æ‰“å¼€

ä¸»è¦æ˜¯æ£€æŸ¥æ˜µç§°å’Œé‚®ç®±

```ejs
<script>
    document.body.addEventListener('click', function(e) {
        if (e.target.classList.contains('vsubmit')) {
            const email = document.querySelector('input[type=email]');
            const nick = document.querySelector('input[name=nick]');
            const reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
            if (!email.value || !nick.value || !reg.test(email.value)) {
                const str = `<div class="valert text-center"><div class="vtext">è¯·å¡«å†™æ­£ç¡®çš„æ˜µç§°å’Œé‚®ç®±ï¼</div></div>`;
                const vmark = document.querySelector('.vmark');
                vmark.innerHTML = str;
                vmark.style.display = 'block';
                setTimeout(function() {
                    vmark.style.display = 'none';
                    vmark.innerHTML = '';
                }, 2500);
            }
        }
    });
</script>
```

### ~~ç‚¹å‡»å›å¤è¯„è®ºæ¡†è·Ÿéš~~

è¿˜æ˜¯ immmmm çš„

> å®˜æ–¹ç‰ˆæœ¬ç‚¹å‡»å›å¤æ—¶éƒ½æ˜¯è·³å›åˆ°é¡µé¢ä¸Šæ–¹çš„è¯„è®ºæ¡†è¿›è¡Œå›å¤ï¼Œè¯„è®ºæ¡†æ˜¯å›ºå®šä¸åŠ¨çš„ã€‚æ¯”è¾ƒåˆç†çš„æ˜¯ï¼šç‚¹å“ªæ¡çš„å›å¤ï¼Œè¯„è®ºæ¡†å°±æ˜¾ç¤ºåœ¨æ­¤æ¡è¯„è®ºä¸‹æ–¹ã€‚é¿å…é¡µé¢è·³ä¸Šè·³ä¸‹ã€‚
> ç›¸å…³ jQuery ä»£ç ï¼š

```ejs
$(document).ready(function(){
	$('.vemoji-btn').text('ğŸ˜€');
	$("#vcomments").on('click', 'span.vat',function(){
		$(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
		$('textarea#veditor').focus();
	})
})
```

## é‚®ä»¶æé†’

**é‡å¤´æˆ**æ¥äº†

å¥½ä¸å®¹æ˜“æ­äº†ä¸ªåšå®¢ï¼Œç»“æœæœ‰äººè¯„è®ºæˆ‘ä»¬ä¸èƒ½åŠæ—¶å›å¤ï¼Œè¿™ä½“éªŒæ„Ÿå¤šå·®

gitmentã€gitalk éƒ½æ˜¯ç”¨çš„ GitHub çš„ issueï¼Œèƒ½å¤Ÿè½»æ¾åœ°å‘é€é‚®ä»¶æé†’

è€Œ valine å‘¢

æœ‰å¤§ä½¬å°±å¼„å‡ºäº† valine-Adminï¼Œå¯ä»¥ç»“åˆ LeanCloud å®ç°é‚®ç®±æé†’åŠŸèƒ½

é¡¹ç›®åœ°å€ï¼š[Valine-Admin](https://github.com/DesertsP/Valine-Admin)

### äº‘å¼•æ“è®¾ç½®

å›åˆ°æˆ‘ä»¬åœ¨ LeanCloud åˆ›å»ºçš„åº”ç”¨ `valine`ï¼Œç‚¹å‡»å·¦è¾¹çš„ç¬¬äºŒä¸ªé€‰é¡¹`äº‘å¼•æ“`

ç‚¹å‡» `web ç»„`ä¸‹æ–¹çš„`è®¾ç½®`

åœ¨ä»£ç åº“çš„ä¸‹æ–¹å¡«ä¸Š `https://github.com/DesertsP/Valine-Admin.git`ï¼Œç‚¹å‡»æ–¹æ¡†å³è¾¹çš„<kbd>ä¿å­˜</kbd>

![ä»£ç åº“](https://cdn.wallleap.cn/img/pic/illustration/valine2.png)

å¾€ä¸‹æ»‘ï¼Œåœ¨`è‡ªå®šä¹‰ç¯å¢ƒå˜é‡`è¿™é‡Œæ·»åŠ å¦‚ä¸‹å˜é‡

![å˜é‡](https://cdn.wallleap.cn/img/pic/illustration/valine3.png)

è¿™äº›ä¸‹é¢æœ‰è§£é‡Šï¼Œæˆ‘ä»¬å…ˆæ¥ç€å¾€ä¸‹æ»‘ï¼ŒæŠŠ `Web ä¸»æœºåŸŸå`å¯ç”¨

![Web ä¸»æœºåŸŸå](https://cdn.wallleap.cn/img/pic/illustration/valine4.png)

| å˜é‡             | ç¤ºä¾‹                                      | è¯´æ˜                                                         |
| ---------------- | ----------------------------------------- | ------------------------------------------------------------ |
| **SITE_NAME**    | Deserts                                   | [å¿…å¡«]åšå®¢åç§°                                               |
| **SITE_URL**     | https://deserts.io                          | [å¿…å¡«]é¦–é¡µåœ°å€                                               |
| ***SMTP_SERVICE*** | QQ                                        | [æ–°ç‰ˆæ”¯æŒ]é‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œæ”¯æŒ QQã€163ã€126ã€Gmail ä»¥åŠ [æ›´å¤š](https://nodemailer.com/smtp/well-known/#supported-services) |
| **SMTP_USER**      | xxxxxx@qq.com                             | [å¿…å¡«]SMTPç™»å½•ç”¨æˆ·                                           |
| **SMTP_PASS**      | ccxxxxxxxxch                              | [å¿…å¡«]SMTPç™»å½•å¯†ç ï¼ˆQQé‚®ç®±éœ€è¦è·å–ç‹¬ç«‹å¯†ç ï¼‰                 |
| **SENDER_NAME**      | Deserts                                   | [å¿…å¡«]å‘ä»¶äºº                                                 |
| **SENDER_EMAIL**     | xxxxxx@qq.com                             | [å¿…å¡«]å‘ä»¶é‚®ç®±                                               |
| **ADMIN_URL**        | https://xxx.leanapp.cn/                   | [å»ºè®®]Webä¸»æœºäºŒçº§åŸŸåï¼Œç”¨äºè‡ªåŠ¨å”¤é†’                          |
| BLOGGER_EMAIL    | xxxxx@gmail.com                           | [å¯é€‰]åšä¸»é€šçŸ¥æ”¶ä»¶åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨SENDER_EMAIL                 |
| AKISMET_KEY      | xxxxxxxxxxxx                              | [å¯é€‰]Akismet Key ç”¨äºåƒåœ¾è¯„è®ºæ£€æµ‹ï¼Œè®¾ä¸ºMANUAL_REVIEWå¼€å¯äººå·¥å®¡æ ¸ï¼Œç•™ç©ºä¸ä½¿ç”¨ååƒåœ¾ |
| MAIL_SUBJECT        | ${PARENT_NICK}ï¼Œæ‚¨åœ¨${SITE_NAME}ä¸Šçš„è¯„è®ºæ”¶åˆ°äº†å›å¤ | [å¯é€‰]@é€šçŸ¥é‚®ä»¶ä¸»é¢˜ï¼ˆæ ‡é¢˜ï¼‰æ¨¡æ¿ |
| MAIL_TEMPLATE       | è§ä¸‹æ–‡                                             | [å¯é€‰]@é€šçŸ¥é‚®ä»¶å†…å®¹æ¨¡æ¿         |
| MAIL_SUBJECT_ADMIN  | ${SITE_NAME}ä¸Šæœ‰æ–°è¯„è®ºäº†                           | [å¯é€‰]åšä¸»é‚®ä»¶é€šçŸ¥ä¸»é¢˜æ¨¡æ¿      |
| MAIL_TEMPLATE_ADMIN | è§ä¸‹æ–‡                                             | [å¯é€‰]åšä¸»é‚®ä»¶é€šçŸ¥å†…å®¹æ¨¡æ¿      |

åšå®¢åã€åšå®¢åœ°å€åº”è¯¥ä¼šå¡«å§

é‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œä½ ä½¿ç”¨çš„å“ªç§å°±å¡«å“ªä¸ªï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ `xxx@qq.com`ï¼Œé‚£ä¹ˆå°±å¡« `QQ`ã€‚

SMTP ç™»å½•ç”¨æˆ·å¡«ä¸Šä½ è‡ªå·±çš„é‚®ç®±

ç™»å½•å¯†ç å¹¶ä¸æ˜¯çœŸçš„ç™»å½•å¯†ç ï¼Œç½‘æ˜“çš„è‡ªå·±æœä¸€ä¸‹`ç½‘æ˜“é‚®ç®±ç™»å½•æˆæƒç `ï¼›QQ é‚®ç®±çš„ä¸ºç‹¬ç«‹å¯†ç 

å‘ä»¶äººå¡«è‡ªå·±æ˜µç§°

å‘ä»¶é‚®ç®±å’Œåšä¸»æ”¶ä»¶åœ°å€éƒ½å¯ä»¥å¡«åˆšæ‰çš„é‚®ç®±

äºŒçº§åŸŸåå°±æ˜¯åˆšåˆšå¼€å¯çš„å“ªä¸ª

`AKISMET_KEY`ï¼Œæœ‰ä¸‰ç§é€‰æ‹©ï¼šä¸æ·»åŠ ï¼Œä¸å¼€å¯å®¡æ ¸ï¼›æ·»åŠ åè®¾ç½®ä¸º `MANUAL_REVIEW` äººå·¥å®¡æ ¸ï¼›è®¾ä¸ºä½ æ³¨å†Œ <https://akismet.com/development/> åè·å–çš„ key è‡ªåŠ¨å®¡æ ¸æ‹¦æˆªåƒåœ¾è¯„è®º

### è®¾ç½®é‚®ä»¶æ¨¡æ¿

ä¸Šé¢è¿˜æœ‰å››ä¸ªå˜é‡æ²¡è¯´ï¼Œè¿™å››ä¸ªå°±æ˜¯ç”¨æ¥è®¾ç½®é‚®ä»¶æ¨¡æ¿çš„ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ LeanCloud è‡ªå¸¦çš„

ä¸¤ä¸ªæ ‡é¢˜å°±ä¸è¯´äº†

è¯´ä¸‹`@çš„`å’Œ`é€šçŸ¥åšä¸»`çš„å†…å®¹æ¨¡æ¿

å¯ä»¥ç›´æ¥è®¾ç½®ä¸ºé¡¹ç›®åœ°å€ä¸­ç»™çš„

ä¹Ÿå¯ä»¥ç”¨ immmmm çš„ï¼š

MAIL_TEMPLATE ä»£ç ï¼Œè‡ªè¡Œæ›¿æ¢ logo å›¾ç‰‡åœ°å€ï¼š

```html
<div style="padding:2em 10%;color:#b3b3b1;width:420px;margin:0 auto;font-size:14px";>
	<img style="display:block;width:50px;margin:0 auto" src="https://å›¾ç‰‡åœ°å€/logo.png">
	<p style="text-align:center;">Hiï¼Œ<span style="color:#3eae5f"> ${PARENT_NICK} </span></p>
	<p style="font-size:13px;text-align:center;">æœ‰äººå›å¤äº†æ‚¨åœ¨ <strong style="font-weight:bold"> ${SITE_NAME} </strong> ä¸Šçš„è¯„è®º</p>
	<hr style="width:64px;border:0;border-bottom:1px solid #e5e5e5;margin:24px auto;">
	<div style="color:#333;overflow:hidden;">
		<p style="display:inline-block;float:left;"><span style="color:#3eae5f;font-weight:bold"> æ‚¨ </span><span>è¯´ï¼š</span></p>
		${PARENT_COMMENT}
	</div>
	<div style="color:#333;overflow:hidden;">
		<p style="display:inline-block;float:left;"><span style="color:#3eae5f;font-weight:bold"> ${NICK} </span><span>è¯´ï¼š</span></p>
		${COMMENT}
	</div>
	<p><a style="color:#ffffff;text-decoration:none;display:inline-block;min-height:28px;line-height:28px;padding:0 13px;outline:0;background:#3eae5f;font-size:13px;text-align:center;font-weight:400;border:0;border-radius:999em" href="${POST_URL}" target="_blank">ç‚¹å‡»æŸ¥çœ‹</a></p>
	<hr style="width:64px;border:0;border-bottom:1px solid #e5e5e5;margin:24px auto;">
	<p><a style="display:block;color:#b3b3b1;text-decoration:none;text-align:center;" href="${SITE_URL}" target="_blank">${SITE_NAME}</a></p>
</div>
```

MAIL_TEMPLATE_ADMIN é€šçŸ¥åšä¸»é‚®ä»¶æ¨¡æ¿ä»£ç ï¼š

```html
<div style="line-height:24px;font-size:13px;">
    <p><span style="color:#3eae5f"> ${NICK} </span> è¯´ï¼š</p>
    <p >${COMMENT}</p>
    <p style="font-size:12px;line-height:12px;"><a style="color:#b3b3b1;text-decoration:none;" href="${POST_URL}" target="_blank">${POST_URL}</a></p>
</div>
```

åœ¨è¿™é‡Œé¢å¯ç”¨çš„å˜é‡æœ‰ï¼š

| æ¨¡æ¿é‡Œçš„å˜é‡     | è¯´æ˜                            |
| -------------- | ------------------------------- |
| SITE_NAME      | åšå®¢åç§°                        |
| SITE_URL       | åšå®¢é¦–é¡µåœ°å€                    |
| POST_URL       | æ–‡ç« åœ°å€ï¼ˆå®Œæ•´è·¯å¾„ï¼‰            |
| *PARENT_NICK*    | æ”¶ä»¶äººæ˜µç§°ï¼ˆè¢«@è€…ï¼Œçˆ¶çº§è¯„è®ºäººï¼‰ |
| *PARENT_COMMENT* | çˆ¶çº§è¯„è®ºå†…å®¹                    |
| NICK           | æ–°è¯„è®ºè€…æ˜µç§°                    |
| COMMENT        | æ–°è¯„è®ºå†…å®¹                      |

åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨çš„è¯ï¼Œ`${å˜é‡å}`

*æ–œä½“*çš„ä¸¤ä¸ªå˜é‡è¡¨ç¤ºåªèƒ½åœ¨è¢«@çš„æ¨¡æ¿ä¸­ä½¿ç”¨

### å¼€å§‹éƒ¨ç½²

ç‚¹å‡»å·¦è¾¹çš„`éƒ¨ç½²`ï¼Œå†ç‚¹å‡»é¡µé¢ä¸­çš„ <kbd>Git æºç éƒ¨ç½²</kbd>

åœ¨å‡ºç°çš„é¡µé¢ä¸­`åˆ†æ”¯æˆ–ç‰ˆæœ¬å·`ä¸‹æ–¹çš„æ¡†ä¸­å¡«å…¥`master`ï¼Œå‹¾é€‰â˜‘ï¸`ä¸‹è½½æœ€æ–°ä¾èµ–`å¤é€‰æ¡†

å†ç‚¹å‡»<kbd>éƒ¨ç½²</kbd>,æ¥ç€ç­‰å¾…éƒ¨ç½²å®Œæˆå³å¯

![éƒ¨ç½²](https://cdn.wallleap.cn/img/pic/illustration/valine5.png)

### è®¾ç½®å®šæ—¶ä»»åŠ¡

åˆ°ä¸Šä¸€æ­¥å·²ç»å®Œæˆäº†é‚®ç®±é€šçŸ¥æé†’çš„åŠŸèƒ½äº†

ä½†æ˜¯å…è´¹çš„ LeanCloud æœ‰ä¼‘çœ æ”¿ç­–ï¼Œå…·ä½“èƒ½è¿è¡Œå‡ å°æ—¶å¿˜è®°äº†ï¼Œä½†æ˜¯ä¸èƒ½å…¨å¤©è¿è¡Œ

ä¹Ÿå°±æ˜¯è¯´å¯èƒ½ä¼šæ¼æ‰ä¸€äº›è¯„è®ºçš„æé†’

åˆšå¥½ LeanCloud æœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥å¼¥è¡¥è¿™ä¸ªç¼ºé™·

ä¸èƒ½å…¨å¤©24hä¸€ç›´è¿è¡Œï¼Œé‚£ä¹ˆæˆ‘è¿è¡Œä¸€ä¼šä¼‘æ¯ä¸€ä¼šï¼Œåœ¨è¿è¡Œçš„é‚£ä¸ªæ—¶é—´æ®µé‡ŒæŠŠé‚®ä»¶è¡¥å‘ä¸€ä¸‹æ€»è¡Œå§

è¿™å°±æ˜¯å®šæ—¶ä»»åŠ¡æ‰€æ‰§è¡Œçš„å†…å®¹

ç‚¹å‡»`å®šæ—¶ä»»åŠ¡`ï¼Œåˆ›å»ºä¸¤ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåˆ†åˆ«å¡«ï¼š

åç§°ï¼š`è‡ªåŠ¨å”¤é†’`  ç”Ÿäº§ç¯å¢ƒï¼š`self-wake`  Cronè¡¨è¾¾å¼ï¼š`0 0/30 7-23 * * ?`
åç§°ï¼š`å®šæ—¶æ£€æŸ¥24å°æ—¶å†…æ¼å‘çš„é‚®ä»¶é€šçŸ¥`  ç”Ÿäº§ç¯å¢ƒï¼š`resend-mails`  Cronè¡¨è¾¾å¼ï¼š`0 0 8 * * ?`

![](https://cdn.wallleap.cn/img/pic/illustration/valine6.png)

---

è®¾ç½®å®Œæˆä¹‹åå°± OK å•¦

è¿™æ ·å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œç¾çš„è¯„è®ºç³»ç»Ÿäº†

---

ç°åœ¨å¯ä»¥é€‰æ‹© [waline](https://waline.js.org/) æˆ–è€… [twikoo](https://twikoo.js.org/)
